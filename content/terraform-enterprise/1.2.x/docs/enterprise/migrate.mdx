---
page_title: Migrate Terraform state to Terraform Enterprise or Terraform Enterprise
description: >-
  Learn how to migrate existing Terraform state to Terraform Enterprise or
  Terraform Enterprise using the CLI, API, or tf-migrate.
source: terraform-docs-common
# START AUTO GENERATED METADATA, DO NOT EDIT
created_at: 2026-02-02T17:54:50Z
last_modified: 2026-02-02T17:55:25Z
# END AUTO GENERATED METADATA
---

# Migrate Terraform state to HCP Terraform or Terraform Enterprise

This topic describes how to migrate existing Terraform state files to HCP Terraform or Terraform Enterprise without first de-provisioning them. Refer to [State](/terraform/language/state) in the Terraform configuration language reference for additional information about Terraform state.

## Overview

Perform the following actions to migrate existing resources to one or more workspaces in HCP Terraform or Terraform Enterprise:

1.  Stop all Terraform operations associated with the state files.
2.  Migrate Terraform state files to HCP Terraform or Terraform Enterprise.

You have three options to migrate your state:

1.  Manually using the Terraform CLI
2.  Manually using the HCP Terraform API
3.  Automatically using `tf-migrate`

## Requirements

-   Terraform v1.1 and later is required to configure the `cloud` block. For Terraform v1.0 and older, use the [`remote` backend](/terraform/language/settings/backends/remote) instead.
-   Create an account on [HCP Terraform](https://app.terraform.io/) or on a [Terraform Enterprise instance](/terraform/enterprise/users-teams-organizations/users#creating-an-account).
-   You must present a token linked to appropriate permissions to use the API. Refer to the following topics for additional information:
    -   [HCP Terraform API overview](/terraform/enterprise/api-docs)
    -   [Terraform Enterprise API overview](/terraform/enterprise/api-docs)

## Stop Terraform operations

Stop all Terraform operations associated with the state files. This may require locking or deleting CI jobs, restricting access to the state backend, and communicating with other teams. You should also only migrate state files into HCP Terraform or Terraform Enterprise workspaces that have never performed a run.

## Migrate state using the CLI

> **Hands-on:** Complete the [Migrate State to HCP Terraform](/terraform/tutorials/state/cloud-migrate) tutorial for additional guidance on how to migrate Terraform state using the CLI.

1.  Add the `cloud` block to your Terraform configuration and specify the following fields:

    1.  `hostname` field: Specify either `app.terraform.io` for HCP Terraform or the hostname of your Terraform Enterprise deployment.
    2.  `organization` field: Specify your HCP Terraform or Terraform Enterprise organization.
    3.  `workspaces` block: Add a `tags` or `name` field and specify one or more destination workspaces as a list of strings.

    Refer to [Define connection settings](/terraform/cli/cloud/settings#define-connection-settings) in the Terraform CLI documentation for additional information. The following example migrates the state associated with the configuration to the `networking` workspace on HCP Terraform:

    ```hcl
    terraform {
      cloud {
        hostname = "app.terraform.io"
        organization = "my-org"
        workspaces {
          tags = ["networking"]
        }
      }
    }
    ```

2.  Run `terraform init`. Terraform creates any workspaces specified in the configuration if they do not already exist in the organization.

## Migrate state using the API

1.  Encode your state files as a base64 string and generate an MD5 hash. The following example generates the string and hash file for a single `terraform.tfstate` file:

    ```shell-session
     $ cat terraform.tfstate | base64
     dGVycmFmb3JtLnRmc3RhdGUK
     $ md5sum terraform.tfstate
     690a3f8ae079c629494a52c68757d585  terraform.tfstate
    ```

2.  If the workspace does not yet exist in your organization, send a `POST` request to the `/organizations/:organization_name/workspaces` endpoint to create it. Otherwise, proceed to the next step. Refer to the following topics for details:
    -   [Create a workspace](/terraform/enterprise/api-docs/workspaces#create-a-workspace) in the HCP Terraform API reference documentation.
    -   [Create a workspace](/terraform/enterprise/api-docs/workspaces#create-a-workspace) in the Terraform Enterprise API reference documentation.

3.  Send a `POST` request to the `/workspaces/:workspace_id/actions/lock` endpoint to lock the workspace. Refer to the following topics for details:
    -   [Lock a workspace](/terraform/enterprise/api-docs/workspaces#lock-a-workspace) in the HCP Terraform API reference documentation.
    -   [Lock a workspace](/terraform/enterprise/api-docs/workspaces#lock-a-workspace) in the Terraform Enterprise API reference documentation.

4.  To upload your state files to the workspace, send a `POST` request to the `/workspaces/:workspace_id/state-versions` endpoint. Specify the MD5 string in the `data.attributes.md5` field and encoded state file in the `data.attributes.state` field of the request body.  Refer to the following topics for details:
    -   [Create a state version](/terraform/enterprise/api-docs/state-versions#create-a-state-version) in the HCP Terraform API reference documentation.
    -   [Create a state version](/terraform/enterprise/api-docs/state-versions#create-a-state-version) in the Terraform Enterprise API reference documentation.

5.  Send a `POST` request to the `/workspaces/:workspace_id/actions/unlock` endpoint to unlock the workspace.

Refer to the following external article for an example of how to create a script in Python to automate multiple state files:
[Migrating A Lot of State with Python and the HCP Terraform (previously Terraform Cloud) API](https://medium.com/hashicorp-engineering/migrating-a-lot-of-state-with-python-and-the-terraform-cloud-api-997ec798cd11). The example uses the [Workspaces API](/terraform/enterprise/api-docs/workspaces#create-a-workspace) to create the necessary workspaces in HCP Terraform and the [State Versions API](/terraform/enterprise/api-docs/state-versions) to migrate the state files to those workspaces.

## Migrate state using `tf-migrate`

> **Hands-on:** Complete the [Migrate to HCP Terraform in bulk](/terraform/tutorials/cloud/bulk-migrate-hcp) tutorial to get started with tf-migrate.

You can use the `tf-migrate` CLI tool to automatically migrate state to HCP Terraform and Terraform Enterprise. The tool does not ship with HCP Terraform. You must download and install the binary for the CLI tool separately. Refer to the [`tf-migrate` documentation](/terraform/migrate) for more information.

<!-- BEGIN: TFC:only name:stacks-tfe -->

## Migrate a workspace to a Stack

In HCP Terraform, there are two ways of organizing your infrastructure:

-   Workspaces are ideal for managing a self-contained infrastructure of one Terraform root module.
-   Stacks are ideal for managing multiple infrastructure modules and repeating that infrastructure at scale.

If you have an existing workspace that you want to convert to a Stack, you can use the Terraform migrate CLI to migrate your workspace state and configuration to a Stack in HCP Terraform. Refer to the [Terraform migrate CLI](/terraform/migrate/stacks) to learn more.

<!-- END: TFC:only name:stacks-tfe -->
