---
page_title: Plugin Internals
sidebar_title: Plugins
sidebar_current: docs-internals-plugins
description: Imports allow a Sentinel policy to access external data and add new functions.
layout: docs
# START AUTO GENERATED METADATA, DO NOT EDIT
created_at: 2023-01-01T00:00:00.000Z
last_modified: 2023-01-01T00:00:00.000Z
# END AUTO GENERATED METADATA
---

# Plugin Internals

Sentinel is built on a plugin-based architecture to support
[imports](/sentinel/extending). This allows anybody to extend
Sentinel to support new sources of data for making policy decisions as well
as to expose new functions for working with data. This page documents
the internals of how plugins work, not how to write them.

If you're interested in developing an import plugin, please see the
[developing an import plugin page](/sentinel/extending/dev).

~> **Advanced Topic!** This page covers technical details of Sentinel. You
don't need to understand these details to effectively use Sentinel. The details
are documented here for those who wish to learn about them.

## Basics

Sentinel plugins are built on top of the HashiCorp
[go-plugin system](https://github.com/hashicorp/go-plugin). This is the
same plugin system powering all pluggable HashiCorp tools such as
[Terraform](https://www.terraform.io),
[Vault](https://www.vaultproject.io), and more. go-plugin is a system
that has been used in production for millions of users for over 5 years.

Plugins are executable binaries. Sentinel is responsible for launching
and managing the lifecycle of plugins. Once a plugin is running, Sentinel
communicates with the plugin via [gRPC](https://grpc.io/). The
[protocol is open source](https://github.com/hashicorp/sentinel-sdk/blob/master/proto/import.proto)
to allow anyone to write a Sentinel plugin.

## Lifecycle

Sentinel launches plugins and is responsible for plugin lifecycle.

The runtime optimizes for latency by launching the plugin as soon as
it is configured, rather than when a policy requires it. This ensures that
the plugin is ready to be used immediately. A plugin is only closed when
Sentinel is reconfigured to no longer allow that plugin or if the
Sentinel-enabled application is closing.

When a plugin is removed from the configuration, Sentinel may wait to
shut down the plugin until all currently executing policies that are using
that plugin complete. New policy executions will not be allowed to use
the old plugins.

Plugins are automatically restarted if they shut down unexpectedly.
Policies that were executing while this happens may fail. The Sentinel
system is improving to more gracefully understand locations where it is
safe to retry an execution.

## Communication

An [initial handshake](https://github.com/hashicorp/go-plugin/blob/master/docs/internals.md)
is done via stdout to determine the main communication location. Following
the handshake, communication will either occur on a local Unix domain socket
or via a local-only TCP socket.
