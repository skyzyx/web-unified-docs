---
layout: docs
page_title: Use dynamic LDAP credentials
description: >-
  Configure LDAP for dynamic credentials
# START AUTO GENERATED METADATA, DO NOT EDIT
created_at: 2025-12-02T10:07:54-08:00
last_modified: 2026-01-07T14:20:34-05:00
# END AUTO GENERATED METADATA
---

# Use dynamic credentials with LDAP

Use dynamic LDAP credentials and manage LDAP user accounts through LDIF.

## Before you start 

- **Check your Vault permissions**. You must have permission to enable and
  configure plugins in Vault.
- **You must have an LDAP plugin configured for OpenLDAP or Active Directory**.
  If you do not already have an LDAP plugin enabled, follow the
  [setup guide](/vault/docs/secrets/ldap/setup).



## Step 1: Create your LDAP LDIF entries

Vault manages LDAP accounts through LDIF entries. LDIF entries are a
base64-encoded version of the LDIF string that Vault parses and validates
against
[proper LDIF syntax](https://ldap.com/ldif-the-ldap-data-interchange-format/).

LDIF parameters (`*_ldif`) define account templates using the
[go template](https://golang.org/pkg/text/template/) language.


<Tabs>

<Tab heading="OpenLDAP" group="openldap">

@include 'ldap/ldif/openldap.mdx'

</Tab>

<Tab heading="Active Directory" group="ad">

@include 'ldap/ldif/ad.mdx'

</Tab>

</Tabs>



## Step 2: Create a Vault role configuration file

For easier maintenance and reuse, create a JSON file `ldap-role.json`, with the
dynamic role details so Vault knows how to create an LDAP domain user account.

We strongly recommend configuring a rollback LDIF to
ensure Vault removes any partialy created entities in the event of a failure.
Vault automatically runs the rollback statments if credential creation fails for
any reason.

```json
{
  "creation_ldif": "@/path/to/creation.ldif",
  "deletion_ldif": "@/path/to/deletion.ldif",
  "rollback_ldif": "@/path/to/rollback.ldif",
  "default_ttl":   "1h",
  "max_ttl":       "24h"
}
```



## Step 3: Save the Vault role

<Tabs>

<Tab heading="CLI" group="cli">

@include 'ldap/create-dynamic-role/cli.mdx'

</Tab>

<Tab heading="API" group="api">

@include 'ldap/create-dynamic-role/api.mdx'

</Tab>

</Tabs>



## Step 4: Test credential generation 

Generate credentials to confirm setup:

<Tabs>

<Tab heading="CLI" group="cli">

@include 'ldap/get-dynamic-creds/cli.mdx'

</Tab>

<Tab heading="API" group="api">

@include 'ldap/get-dynamic-creds/api.mdx'

</Tab>

</Tabs>

The `distinguished_names` field is an array of DNs that are created from the `creation_ldif` statements. If more than
one LDIF entry is included, the DN from each statement will be included in this field. Each entry in this field
corresponds to a single LDIF statement. No de-duplication occurs and order is maintained.

